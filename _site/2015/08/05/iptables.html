<!doctype html>
<head>
    <title>iptalbesのごく基本的な使い方</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/stylesheets/github-light.css" media="screen">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>
    <section class="page-header">
      <h1 class="project-name">smile-tech.net</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/smile-0yen/smile-tech.net" class="btn">View on GitHub</a>
      <a href="https://github.com/smile-0yen/smile-tech.net/zipball/gh-pages" class="btn">Download .zip</a>
      <a href="https://github.com/smile-0yen/smile-tech.net/tarball/gh-pages" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <div id="content">
         <div class="post">
<h1>iptalbesのごく基本的な使い方</h1>
Posted at <span>05 Aug 2015</span><br />
<br />
<p><strong>iptablesは</strong>ファイアーウォールの一実装であり、不要な通信経路を遮断し
必要な通信のみを許可するというセキュリティ機能を提供する。</p>

<p>RHEL7以降は標準ではなくなってしまったが、<strong>まだ</strong>広く使われている。</p>

<p>実行をミスすると操作をしている接続元まで遮断してしまい何もできなくなるので注意。
もしそうなった時は慌てずにサーバをリブートしよう。設定保存前なら接続できる。</p>

<h2>設定確認</h2>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo iptables -L --line-numbers
</code></pre></div>
<h2>許可するIPの追加</h2>

<p>iptablesはhosts.allowなどと同様に上から順番に解釈される。よって接続許可は先頭に、接続拒否は末尾に追加する。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo iptables -I INPUT &lt;行番号&gt; -p tcp -s &lt;サーバ名&gt; --dport &lt;ポート番号&gt; -j ACCEPT
</code></pre></div>
<h2>設定の保存</h2>

<p><strong>ルールが想定通りであることを確認できたら</strong>サーバ起動時に読み込まれる設定ファイルを更新する。
以降はサーバを再起動しても同じルールが設定されるようになる。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo service iptables save # /etc/sysconfig/iptables に設定が保存される
</code></pre></div>
<h2>設定の読み込み</h2>

<p>ファイルからルールを読み込むこともできる。サーバの引っ越し時などに使うこともあるかもしれない。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo sh -c &#39;iptables-restore &lt; /etc/sysconfig/iptables&#39;
</code></pre></div>
</div>
<a href="/">もどる</a>

      </div>
      <footer class="site-footer">
         <span class="site-footer-owner"><a href="https://github.com/smile-0yen/smile-tech.net">smile-tech.net</a> is maintained by <a href="https://github.com/smile-0yen">smile-0yen</a>.</span>

         <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>
    </section>
</body>
